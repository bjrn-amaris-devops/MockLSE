FROM alpine:latest

WORKDIR app/

USER awscliuser

RUN apk add --no-cache \
        python3 \
        py3-pip \
    && pip3 install --upgrade pip \
    && pip3 install --no-cache-dir \
        awscli \
    && rm -rf /var/cache/apk/*


RUN apk add --no-cache make

RUN apk add --update docker openrc

#RUN service docker start
RUN mkdir /.docker
RUN touch /.docker/config.json
RUN chown +rw awscliuser /.docker

RUN echo '"{"credsStore": "osxkeychain"}"' > /.config/docker.json




